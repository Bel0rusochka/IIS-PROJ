<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FITstagram</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="twitter:card" content="summary_large_image" />


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Font Styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&display=swap"/>

    <!-- Animation Styles -->
    <link rel="stylesheet" href="https://unpkg.com/animate.css@4.1.1/animate.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css" />
    <link rel="stylesheet" href="../static/css/index.css" />
  </head>
  <body>
  {% if is_logged %}
    <div id="mySidebar" class="projekt-sidebar">
      <img alt="avatar" src="../static/images/no_avatar.svg" class="avatar" />
      <a href="{{url_for('profile', login=session.user[0])}}" class="projekt-sidebar-item">{{session.user[0]}}</a>
      <a href="{{url_for('groups')}}" class="projekt-sidebar-item">Groups</a>
      <a href="{{url_for('shares')}}" class="projekt-sidebar-item">Shares</a>
      <a href="{{url_for('settings')}}" class="projekt-sidebar-item">Settings</a>
      <a href="{{url_for('comrades')}}" class="projekt-sidebar-item">Comrades</a>
      <a href="{{url_for('logout')}}" class="projekt-sidebar-item">Log Out</a>
    </div>
  {% endif %}

    <div class="projekt-container">
      <div class="projekt-projekt">
        <!-- Header Section -->
        <div class="projekt-header">
          <a href="{{ url_for('index') }}" class="pagesignup-text10">FITstagram</a>

          <!-- Icons Section -->
          <div class="projekt-frame2" id="iconContainer">
            {% if not is_logged %}
              <a  href="{{url_for('login')}}"  class="pagesignup-buttlogin">
                <span class="pagesignup-text26"><span>log in</span></span>
              </a>
            {% else %}
              <img alt="menu" src="../static/images/menu211-wd1k.svg" class="projekt-menu" onclick="toggleNav()" />
            {% endif %}
          </div>
        </div>
        <a href="{{ url_for('index') }}" class="back-button" >
          <i class="fas fa-arrow-left"></i>
      </a>
          <!-- Image Detail Section (initially hidden) -->
        <div id="imageDetail">
         
        
            <img alt="Image {{ post.id }}" src="{{ url_for('image', id=post.id) }}" id="selectedImage" data-id="{{ post.id }}"/>

            <div id="imageStats">
              <form action="{{ url_for('like_post', post_id=post.id) }}" method="POST">
                <input type="hidden" name="post_id" value="{{ post.id }}">
                <button type="submit" class="like-button">
                    <i class="fa fa-heart"></i>
                    <span>{{ post.like_count() }}</span>
                </button>
              </form>
              <span id="retweetsCount">
                  <i class="fa fa-retweet"></i> {{ post.shares_count() }}
              </span>
              <span id="commentsCount">
                  <i class="fa fa-comment"></i> {{ post.comments_count() }}
              </span>
            </div>

            <div id="imageTags">
                <span id="tagsList">Tags:</span>

              </button>
                {% for tag in post.associated_tags %}
                <span class="tag fa-arrow-left">{{ tag.name }}</span>
                {% endfor %}

            </div>

        <div id="imageDescription">
            <h3>Description:</h3>
            <p>{{ post.text }}</p>
        </div>

            <!-- Comment Section -->
<div id="commentSection">
    <h3>Comments:</h3>
    <!-- Форма для добавления комментария, можешь поменять на js -->
    <form id="commentForm", action="{{ url_for('add_comment', post_id=post.id) }}" method="POST">
        <textarea id="commentInput" placeholder="Write a comment..." rows="3" cols="50" name="text"></textarea>
        <button id="submitComment">Submit</button>
    </form>

    <!-- Список комментариев -->
    <div id="commentsList">
        {% for comment in comments %}
        <div class="comment" style="border-bottom: 1px solid #ccc; padding: 10px;">
            <div style="font-weight: bold; color: #555;">
                {{ comment.author_login }} - <small>{{ comment.date.strftime('%Y-%m-%d %H:%M') }}</small>
            </div>
            <div style="margin-top: 5px;">
                {{ comment.text }}
            </div>

        </div>
        {% endfor %}
    </div>
</div>
</div>
</div>
    </div>
<script src="../static/js/main.js"></script>

</body>
</html>
