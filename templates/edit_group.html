{% extends "base.html" %}

{% block title %}Post Details{% endblock %}

{% block content %}
<div class="projekt-content">
    <div class="pagesignup-container">
        <div class="pagesignup-pagesignup">

			<form method="POST" class="pagesignup-signup" action="{{ url_for('edit_group', id = group.id) }}">
				<div class="add-viewer-text">Edit Group</div>
			
				<a href="{{ url_for('go_back') }}">
					<img class="back-button" alt="" src="../static/images/arrow2.svg" id="arrowIcon">
				</a>
				<div class="input-container">
					<label for="name" class="floating-label">Group Name</label>
					<input type="text" id="name" name="name" class="pagesignup-input" value="{{ group.name }}">
					<span class="info-icon">ℹ
						<span class="tooltip">Group name must be 2-60 characters and contain only latin letters and numbers.</span>
					</span>
				</div>
			
				<div class="input-container">
					<label for="description" class="floating-label">Description</label>
					<input type="text" id="description" name="description" class="pagesignup-input" value="{{ group.description }}">
					<span class="info-icon">ℹ
						<span class="tooltip">Group description must be no longer than 60 characters.</span>
					</div>
			
				<button type="submit" name="action" value="save" class="pagesignup-buttonsingupbig">Save changes</button>
				<button type="submit" name="action" value="delete" class="pagesignup-buttonsingupbig" formaction="{{ url_for('delete_group') }}">Delete group</button>
				<input type="hidden" name="group_id" value="{{ group.id }}">
			</form>
	<div class="my-members">Users
		<div class="line"></div>
	
		<div class="members-list">
			{% for login,role in users.items() %}
				<div class="member-item">
					<a href="{{ url_for('profile', login=login ) }}" class="member-name">{{ login }} ({{role}})</a>
					<form method="POST" action="{{ url_for('manage_users_group') }}" class="member-actions">
						<input type="hidden" name="user_login" value="{{ login }}">
						<input type="hidden" name="group_id" value="{{ group.id }}">
	
						{% if role != 'admin' %}
							<button type="submit" name="action" value="delete" class="edit-buttons">Delete</button>
						{% endif %}
	
						{% if role == 'member' %}
							<button type="submit" name="action" value="make_admin" class="edit-buttons">Make Admin</button>
						{% endif %}
	
						{% if role == 'pending' %}
							<button type="submit" name="action" value="accept_pending" class="edit-buttons">Accept</button>
						{% endif %}
					</form>
				</div>
			{% endfor %}
	</div>
</div>
</div>
</div>
</div>
<div class="my-posts">Posts
	<div class="line"></div>
		{% for post in posts %}
		<div class="gallery-image">
			<div class="my-members">
				<div class="post-header">
					<div class="left-section">
						<a href="{{ url_for('profile', login=post.author.login) }}" class="author">
							<span>@{{ post.author.login }}</span>
						</a>
					</div>
					<div class="right-section">
						<form method="POST" action="{{ url_for('manage_posts_group') }}" class="post-actions">
							<input type="hidden" name="group_id" value="{{ group.id }}">
							<input type="hidden" name="post_id" value="{{ post.id }}">
							<button type="submit" name="action" value="delete" class="delete-profile">Delete</button>
						</form>
					</div>
				</div>
				<a href="{{ url_for('post', post_id=post.id) }}" >
					<img alt="Image {{ post.id }}" src="{{ url_for('image', id=post.id) }}"class="gallery-image" data-id="{{ post.id }}"> 
				</a>
			</div>
		</div>
		{% endfor %}
	</div>
</div>

{% endblock %}